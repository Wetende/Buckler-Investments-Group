---
alwaysApply: true
description: Business domain routing organization for super platform
globs: api/v1/**/*.py
---

# Business Domain Routing

## Super Platform Domains
This super platform integrates multiple business domains:

### ðŸ  Property Listing Domain (`/api/v1/property/`)
```
property_listing/
â”œâ”€â”€ public_routes.py     # Search, listings, details
â”œâ”€â”€ admin_routes.py      # CRUD operations
â””â”€â”€ catalog_routes.py    # Areas, developers, projects
```

### ðŸ’¼ Investment Platform Domain (`/api/v1/investment/`)
```
investment_platform/
â”œâ”€â”€ public_routes.py     # Product listings
â”œâ”€â”€ user_routes.py       # Orders, positions, KYC
â””â”€â”€ admin_routes.py      # Management, NAV
```

### ðŸ–ï¸ Short-term Rentals Domain (`/api/v1/bnb/`)
```
bnb/
â””â”€â”€ routes.py           # Airbnb-style bookings
```

### ðŸš— Tours Domain (`/api/v1/tours/`)
```
tours/
â””â”€â”€ routes.py           # Tour packages & bookings
```

### ðŸš™ Cars Domain (`/api/v1/cars/`)
```
cars/
â””â”€â”€ routes.py           # Vehicle rentals
```

### ðŸ”— Shared Domain (`/api/v1/shared/`)
```
shared/
â”œâ”€â”€ auth_routes.py      # Authentication
â”œâ”€â”€ user_routes.py      # User management
â”œâ”€â”€ media_routes.py     # File uploads
â””â”€â”€ admin_routes.py     # System administration
```

## Route Naming Conventions

### Create/Update Pattern
```python
# Single endpoint for both create and update
@router.post("/", response_model=EntityResponseDTO)
async def create_or_update_entity(request: EntityCreateUpdateDTO):
    # id=0 for create, id>0 for update
    pass
```

### Retrieval Patterns
```python
# Get single entity
@router.get("/{entity_id}", response_model=EntityResponseDTO)
async def get_entity(entity_id: int):
    pass

# List entities with optional filtering
@router.get("/", response_model=List[EntityResponseDTO])
async def list_entities(
    location: Optional[str] = None,
    min_price: Optional[int] = None,
    limit: int = 20,
    offset: int = 0
):
    pass

# Search with POST for complex criteria
@router.post("/search", response_model=List[EntityResponseDTO])
async def search_entities(criteria: SearchCriteriaDTO):
    pass
```

### Deletion Pattern
```python
# Delete using GET method
@router.get("/{entity_id}/delete", response_model=dict)
async def delete_entity(entity_id: int):
    return {"ok": True, "entity_id": entity_id}
```

## Cross-Domain Integration

### Bundling Endpoints
```python
# Bundle creation across domains
@router.post("/bundles", response_model=BundleResponseDTO)
async def create_bundle(request: CreateBundleRequestDTO):
    # Can include: tours + accommodation + vehicles
    pass
```

### Unified Search
```python
# Search across multiple domains
@router.post("/search/all", response_model=UnifiedSearchResponseDTO)
async def search_all_domains(criteria: UnifiedSearchCriteriaDTO):
    pass
```

## Access Control Patterns

### Public Routes
- No authentication required
- Basic rate limiting
- Available to all users

### User Routes  
- Authentication required
- User-specific data
- Own resource access only

### Admin Routes
- Admin role required
- Full system access
- Audit logging enabled